<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="{{ lang }}">
    <title>{{ config.title }}
    {%- if term %} - {{ term.name }}
    {%- elif section.title %} - {{ section.title }}
    {%- endif -%}
    </title>
    
    {%- if config.description %}
    <subtitle>{{ config.description }}</subtitle>
    {%- endif %}
    
    <link rel="self" type="application/atom+xml" href="{{ feed_url | safe }}"/>
    <link rel="alternate" type="text/html" href="
    {%- if section -%}
    {{ section.permalink | escape_xml | safe }}
    {%- else -%}
    {{ config.base_url | escape_xml | safe }}
    {%- endif -%}
    "/>
    
    <generator uri="https://www.getzola.org/">Zola</generator>
    <language>{{ lang }}</language>
    
    {% if last_updated is defined %}<updated>{{ last_updated | date(format="%+") }}</updated>{% endif %}
    <id>{{ feed_url | safe }}</id>
    
    <!-- Feed metadata -->
    <rights>© {{ now() | date(format="%Y") }} {{ config.author | default(value="Filippo Guerranti") }}</rights>
    <category term="machine-learning" label="Machine Learning"/>
    <category term="research" label="Research"/>
    <category term="graphs" label="Graph Neural Networks"/>
    <category term="phd" label="PhD Research"/>
    
    <author>
        <name>{{ config.author }}</name>
        <uri>{{ config.base_url }}</uri>
    </author>
    
    {%- for page in pages %}
    <entry xml:lang="{{ page.lang }}">
        <title>{{ page.title }}</title>
        <published>{{ page.date | date(format="%+") }}</published>
        <updated>{{ page.updated | default(value=page.date) | date(format="%+") }}</updated>
        
        {%- for author in page.authors %}
        <author>
            <name>{{ author }}</name>
        </author>
        {%- else %}
        <author>
            <name>
            {%- if config.author -%}
                {{ config.author }}
            {%- else -%}
                Unknown
            {%- endif -%}
            </name>
            {% if config.base_url %}<uri>{{ config.base_url }}</uri>{% endif %}
        </author>
        {%- endfor %}
        
        <link rel="alternate" type="text/html" href="{{ page.permalink | escape_xml | safe }}"/>
        <id>{{ page.permalink | escape_xml | safe }}</id>
        
        {%- if page.summary %}
        <summary type="text">{{ page.summary | escape_xml | safe }}</summary>
        {%- endif %}
        
        <!-- Add categories/tags if available -->
        {%- if page.taxonomies.tags %}
        {%- for tag in page.taxonomies.tags %}
        <category term="{{ tag }}" label="{{ tag | title }}"/>
        {%- endfor %}
        {%- endif %}
        
        <!-- Enhanced content with reading time and word count -->
        <content type="html" xml:base="{{ page.permalink | escape_xml | safe }}">
            {%- if page.reading_time %}
            &lt;p&gt;&lt;em&gt;Reading time: {{ page.reading_time }} min{% if page.word_count %} • {{ page.word_count }} words{% endif %}&lt;/em&gt;&lt;/p&gt;
            {%- endif %}
            
            {%- if page.summary %}
            &lt;blockquote&gt;
                &lt;p&gt;&lt;strong&gt;Summary:&lt;/strong&gt; {{ page.summary | escape_xml | safe }}&lt;/p&gt;
            &lt;/blockquote&gt;
            {%- endif %}
            
            {{ page.content | escape_xml | safe }}
            
            {%- if page.taxonomies.tags %}
            &lt;hr&gt;
            &lt;p&gt;&lt;strong&gt;Tags:&lt;/strong&gt; 
            {%- for tag in page.taxonomies.tags -%}
                &lt;a href="{{ config.base_url }}/tags/{{ tag | slugify }}/"&gt;{{ tag }}&lt;/a&gt;
                {%- if not loop.last %}, {% endif -%}
            {%- endfor -%}
            &lt;/p&gt;
            {%- endif %}
            
            &lt;p&gt;&lt;a href="{{ page.permalink | escape_xml | safe }}"&gt;Read more on the website →&lt;/a&gt;&lt;/p&gt;
        </content>
        
    </entry>
    {%- endfor %}
</feed>